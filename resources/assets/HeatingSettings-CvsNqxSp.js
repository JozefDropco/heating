import{Q,a as S}from"./QBreadcrumbs-jZRV3jE-.js";import{Q as g,a as u}from"./QCard-Cecu7SEl.js";import{b as B,a as C,Q as W}from"./QTable-yHvZyNqv.js";import{a as m,Q as f}from"./QCheckbox-DJMVJ3RH.js";import{Q as h,a as n,b}from"./QTr-D4WtnxqQ.js";import{Q as H}from"./QTime-Baw85bKm.js";import{Q as s}from"./QInput-5Rg7EszB.js";import{Q as P,a as Z}from"./QToolbar-DE-mgoJU.js";import{Q as N,C as w}from"./ClosePopup-CSHPXiyK.js";import{_ as O,P as i}from"./_plugin-vue_export-helper-BsH4dlGH.js";import{a as v}from"./index-NIGUFBhG.js";import{h as k}from"./moment-CjhTHW-K.js";import{i as E,j as U,k as r,l as D,m as t,p,D as F,s as q,u as y,C as T}from"./index-m4Lflbw8.js";import"./selection-BDbhJi07.js";import"./touch-BjYP5sR0.js";import"./date-CDRwwtFc.js";const I={data(){return{addHeating:!1,fromTime:null,diffStart:10,diffStop:0,boilerBlocked:!1,modifyFor:k().isoWeekday().toString(),serverPagination:{page:1,rowsNumber:50},selectOptions:[{label:"Pondelok",value:"1"},{label:"Utorok",value:"2"},{label:"Streda",value:"3"},{label:"Štvrtok",value:"4"},{label:"Piatok",value:"5"},{label:"Sobota",value:"6"},{label:"Nedeľa",value:"7"}],columns:[{name:"fromTime",required:!0,label:"Od (čas)",align:"left",field:"fromTime",sortable:!0},{name:"threeWayValveStartDiff",required:!0,label:"Otvoriť 3-cestný ventil pri differencii",align:"threeWayValveStartDiff",field:"hor",sortable:!0},{name:"threeWayValveStopDiff",required:!0,label:"Zatvoriť 3-cestný ventil pri differencii",align:"left",field:"threeWayValveStopDiff",sortable:!0},{name:"boilerBlock",required:!0,label:"Ohrev teplej vody blokovaný",align:"left",field:"boilerBlock",sortable:!0}],rowSelected:[],tableData:[]}},methods:{formatTime(l){return k(l).format("HH:mm:ss")},loadCurrentState(){i.show();let l="ws/heating/query/forDay/"+this.modifyFor;v.get(l).then(e=>{this.tableData=e.data,i.hide()}).catch(e=>{i.hide(),console.log(e)})},editHeating(l){v.put("ws/heating/cmd/update/"+l.id,l,{method:"PUT"}).then(()=>{this.loadCurrentState(),i.hide()}).catch(e=>{i.hide(),console.log(e)})},saveSolarHeating(){i.show();var l={fromTime:this.fromTime,day:this.modifyFor,boilerBlock:this.boilerBlocked,threeWayValveStartDiff:this.diffStart,threeWayValveStopDiff:this.diffStop};v.post("ws/heating/cmd/create",l,{method:"POST"}).then(()=>{this.loadCurrentState(),i.hide()}).catch(e=>{i.hide(),console.log(e)})},deleteHeating(){i.show(),v.delete("ws/heating/cmd/delete/"+this.rowSelected[0].id,{method:"DELETE"}).then(()=>{this.loadCurrentState(),i.hide()}).catch(l=>{i.hide(),console.log(l)})}},mounted(){this.loadCurrentState()}},j={class:"marginLeft5rem marginTop5rem"},L={class:"layout-padding"};function z(l,e,A,K,a,d){return U(),E("div",j,[r(Q,null,{default:t(()=>[r(S,{label:"Domov",to:"/"}),r(S,{label:"Nastavenia",to:"/?tabValue=settings"}),r(S,{label:"Kúrenie",to:"/Heating"})]),_:1}),e[27]||(e[27]=D("br",null,null,-1)),r(g,{inline:""},{default:t(()=>[r(u,null,{default:t(()=>e[25]||(e[25]=[p("Solár a ohrev vody",-1)])),_:1,__:[25]}),r(u,null,{default:t(()=>[r(C,{options:a.selectOptions,"float-label":"Upraviť pre",modelValue:a.modifyFor,"onUpdate:modelValue":e[0]||(e[0]=o=>a.modifyFor=o),onInput:d.loadCurrentState},null,8,["options","modelValue","onInput"]),a.modifyFor!==null?(U(),F(W,{key:0,selection:"single",selected:a.rowSelected,"onUpdate:selected":e[16]||(e[16]=o=>a.rowSelected=o),rows:a.tableData,pagination:a.serverPagination,"onUpdate:pagination":e[17]||(e[17]=o=>a.serverPagination=o),columns:a.columns,"row-key":"id"},{"top-right":t(()=>[r(f,{icon:"delete",disable:a.rowSelected.length===0,label:"Vymazať",onClick:d.deleteHeating},null,8,["disable","onClick"]),r(f,{icon:"add",label:"Pridať",onClick:e[1]||(e[1]=o=>a.addHeating=!0)})]),body:t(()=>[r(h,{props:l.props},{default:t(()=>[r(n,{"auto-width":""},{default:t(()=>[r(m,{dense:"",modelValue:l.props.selected,"onUpdate:modelValue":e[2]||(e[2]=o=>l.props.selected=o)},null,8,["modelValue"])]),_:1}),r(n,{key:"fromTime",props:l.props},{default:t(()=>[p(y(d.formatTime(l.props.row.fromTime))+" ",1),r(b,{modelValue:l.props.row.fromTime,"onUpdate:modelValue":e[4]||(e[4]=o=>l.props.row.fromTime=o),title:"Upraviť",buttons:"","label-set":"Uložiť","label-cancel":"Zavrieť",onSave:e[5]||(e[5]=(o,V)=>d.editHeating(l.props.row))},{default:t(()=>[r(H,{type:"time",modelValue:l.props.row.fromTime,"onUpdate:modelValue":e[3]||(e[3]=o=>l.props.row.fromTime=o),format24h:""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["props"]),r(n,{key:"threeWayValveStartDiff",props:l.props},{default:t(()=>[p(y(l.props.row.threeWayValveStartDiff)+" ",1),r(b,{modelValue:l.props.row.threeWayValveStartDiff,"onUpdate:modelValue":e[7]||(e[7]=o=>l.props.row.threeWayValveStartDiff=o),title:"Upraviť",buttons:"","label-set":"Uložiť","label-cancel":"Zavrieť",onSave:e[8]||(e[8]=(o,V)=>d.editHeating(l.props.row))},{default:t(()=>[r(s,{type:"number",modelValue:l.props.row.threeWayValveStartDiff,"onUpdate:modelValue":e[6]||(e[6]=o=>l.props.row.threeWayValveStartDiff=o)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["props"]),r(n,{key:"threeWayValveStopDiff",props:l.props},{default:t(()=>[p(y(l.props.row.threeWayValveStopDiff)+" ",1),r(b,{modelValue:l.props.row.threeWayValveStopDiff,"onUpdate:modelValue":e[10]||(e[10]=o=>l.props.row.threeWayValveStopDiff=o),title:"Upraviť",buttons:"","label-set":"Uložiť","label-cancel":"Zavrieť",onSave:e[11]||(e[11]=(o,V)=>d.editHeating(l.props.row))},{default:t(()=>[r(s,{type:"number",modelValue:l.props.row.threeWayValveStopDiff,"onUpdate:modelValue":e[9]||(e[9]=o=>l.props.row.threeWayValveStopDiff=o)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["props"]),r(n,{key:"boilerBlock",props:l.props},{default:t(()=>[r(m,{modelValue:l.props.row.boilerBlock,"onUpdate:modelValue":e[12]||(e[12]=o=>l.props.row.boilerBlock=o),disable:""},null,8,["modelValue"]),r(b,{modelValue:l.props.row.boilerBlock,"onUpdate:modelValue":e[14]||(e[14]=o=>l.props.row.boilerBlock=o),title:"Upraviť",buttons:"","label-set":"Uložiť","label-cancel":"Zavrieť",onSave:e[15]||(e[15]=(o,V)=>d.editHeating(l.props.row))},{default:t(()=>[r(m,{modelValue:l.props.row.boilerBlock,"onUpdate:modelValue":e[13]||(e[13]=o=>l.props.row.boilerBlock=o),"label-always":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["props"])]),_:1},8,["props"])]),_:1},8,["selected","rows","pagination","columns"])):q("",!0)]),_:1})]),_:1}),r(B,{modelValue:a.addHeating,"onUpdate:modelValue":e[24]||(e[24]=o=>a.addHeating=o),"auto-close":""},{default:t(()=>[r(g,null,{default:t(()=>[r(u,null,{default:t(()=>[r(P,null,{default:t(()=>[r(Z,null,{default:t(()=>e[26]||(e[26]=[p(" Pridať ",-1)])),_:1,__:[26]})]),_:1})]),_:1}),r(u,null,{default:t(()=>[D("div",L,[r(s,{type:"time","stack-label":"Od",modelValue:a.fromTime,"onUpdate:modelValue":e[18]||(e[18]=o=>a.fromTime=o)},null,8,["modelValue"]),r(s,{type:"number","float-label":"Zapnúť ohrev pri",modelValue:a.diffStart,"onUpdate:modelValue":e[19]||(e[19]=o=>a.diffStart=o)},null,8,["modelValue"]),r(s,{type:"number","float-label":"Zapnúť Bypass pri",modelValue:a.diffStop,"onUpdate:modelValue":e[20]||(e[20]=o=>a.diffStop=o)},null,8,["modelValue"]),r(m,{label:"Blokovať ohrev kotlom",modelValue:a.boilerBlocked,"onUpdate:modelValue":e[21]||(e[21]=o=>a.boilerBlocked=o)},null,8,["modelValue"])])]),_:1}),r(N,null,{default:t(()=>[T(r(f,{color:"primary",label:"Uložiť",onClick:e[22]||(e[22]=o=>d.saveSolarHeating())},null,512),[[w]]),T(r(f,{color:"primary",onClick:e[23]||(e[23]=o=>a.addHeating=!1),label:"Zavrieť"},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ie=O(I,[["render",z]]);export{ie as default};
