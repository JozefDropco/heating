import{a as d,Q as p}from"./QCheckbox-DJMVJ3RH.js";import{Q as r}from"./QInput-5Rg7EszB.js";import{d as i}from"./date-CDRwwtFc.js";import{_ as f,P as a}from"./_plugin-vue_export-helper-BsH4dlGH.js";import{a as s}from"./index-NIGUFBhG.js";import{i as h,j as V,k as o,l as b}from"./index-m4Lflbw8.js";let m=new Date(2017,2,7,0,0,0,0);const y={data(){return{reminder:0,modulo:1,time:null,zoneRefCode:"",timeInSeconds:null,retryTime:null,active:!0,name:""}},computed:{},methods:{saveWatering:function(){a.show();var t={};t.id=this.$route.params.wId,t.name=this.name,t.zoneRefCode=this.zoneRefCode,t.active=this.active,t.modulo=this.modulo,t.reminder=this.reminder,t.timeInSeconds=parseInt(this.timeInSeconds.split(":")[0])*60+parseInt(this.timeInSeconds.split(":")[1]),t.hour=parseInt(this.time.split(":")[0]),t.minute=parseInt(this.time.split(":")[1]),t.retryHour=this.retryTime===null?null:parseInt(this.retryTime.split(":")[0]),t.retryMinute=this.retryTime===null?null:parseInt(this.retryTime.split(":")[1]),s.put("ws/watering/"+this.$route.params.wId,t).then(()=>{a.hide()}).catch(e=>{a.hide(),console.log(e)})},loadCurrentState(){a.show(),s.get("ws/watering/"+this.$route.params.wId).then(t=>{var e=t.data;this.name=e.name,this.zoneRefCode=e.zoneRefCode,this.timeInSeconds=e.timeInSeconds,this.active=e.active,this.modulo=e.modulo,this.reminder=e.reminder,this.timeInSeconds=i.formatDate(i.addToDate(m,{seconds:e.timeInSeconds}),"mm:ss"),this.time=i.formatDate(i.addToDate(m,{hours:e.hour,minutes:e.minute}),"HH:mm"),(e.retryHour!==void 0||e.retryMinute!==void 0)&&(e.retryHour!==void 0&&(e.retryHour=e.hour),e.retryMinute!==void 0&&(e.retryMinute=e.minute),this.retryTime=i.formatDate(i.addToDate(m,{hours:e.retryHour,minutes:e.retryMinute}),"HH:mm")),a.hide()}).catch(t=>{a.hide(),console.log(t)})}},mounted(){this.loadCurrentState()}},k={class:"marginLeft5rem marginTop5rem"};function I(t,e,c,g,l,u){return V(),h("div",k,[o(d,{modelValue:l.active,"onUpdate:modelValue":e[0]||(e[0]=n=>l.active=n),label:t.$t("wateringActive")},null,8,["modelValue","label"]),o(r,{modelValue:l.zoneRefCode,"onUpdate:modelValue":e[1]||(e[1]=n=>l.zoneRefCode=n),"stack-label":t.$t("wateringZoneRefCd")},null,8,["modelValue","stack-label"]),o(r,{modelValue:l.name,"onUpdate:modelValue":e[2]||(e[2]=n=>l.name=n),"stack-label":t.$t("wateringName")},null,8,["modelValue","stack-label"]),o(r,{modelValue:l.modulo,"onUpdate:modelValue":e[3]||(e[3]=n=>l.modulo=n),type:"number","stack-label":t.$t("wateringModulo")},null,8,["modelValue","stack-label"]),o(r,{modelValue:l.reminder,"onUpdate:modelValue":e[4]||(e[4]=n=>l.reminder=n),type:"number","stack-label":t.$t("wateringReminder")},null,8,["modelValue","stack-label"]),o(r,{modelValue:l.timeInSeconds,"onUpdate:modelValue":e[5]||(e[5]=n=>l.timeInSeconds=n),"stack-label":t.$t("wateringDuration")},null,8,["modelValue","stack-label"]),o(r,{modelValue:l.time,"onUpdate:modelValue":e[6]||(e[6]=n=>l.time=n),"stack-label":t.$t("wateringTime")},null,8,["modelValue","stack-label"]),o(r,{modelValue:l.retryTime,"onUpdate:modelValue":e[7]||(e[7]=n=>l.retryTime=n),"stack-label":t.$t("wateringRetryTime")},null,8,["modelValue","stack-label"]),e[8]||(e[8]=b("br",null,null,-1)),o(p,{icon:"save",label:t.$t("save"),onClick:u.saveWatering},null,8,["label","onClick"])])}const D=f(y,[["render",I]]);export{D as default};
